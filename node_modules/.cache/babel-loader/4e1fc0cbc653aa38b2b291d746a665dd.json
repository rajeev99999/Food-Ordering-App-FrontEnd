{"ast":null,"code":"import _classCallCheck from \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/src/screens/home/Home.js\";\nimport React, { Component } from 'react'; //importing the header component\n\nimport Header from '../../common/header/Header'; //importing material-ui components\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport axios from 'axios'; //importing the css file of the Home page\n\nimport './Home.css';\n\nvar styles = function styles(theme) {\n  return {\n    restaurantsCard: {\n      width: 300,\n      maxWidth: 300,\n      height: 340,\n      maxHeight: 340,\n      marginTop: 15,\n      marginBottom: 10,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n      paddingBottom: 15,\n      cursor: 'pointer'\n    }\n  };\n};\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this));\n\n    _this.getRestaurants = function () {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var restaurantsData = null;\n      var xhrRestaurants = new XMLHttpRequest();\n      xhrRestaurants.onload = _this.setState({\n        loading: true\n      });\n      xhrRestaurants.addEventListener('readystatechange', function () {\n        if (this.readyState === 4) {\n          that.setState({\n            restaurants: JSON.parse(this.responseText).restaurants,\n            loading: false\n          });\n        }\n      });\n      axios.get(_this.props.baseUrl + 'restaurant').then;\n      var url = _this.props.baseUrl + 'restaurant';\n      xhrRestaurants.open(\"GET\", url);\n      xhrRestaurants.send(restaurantsData);\n    };\n\n    _this.noOfColumns = function () {\n      if (window.innerWidth >= 320 && window.innerWidth <= 600) {\n        _this.setState({\n          cards: 1\n        });\n\n        return;\n      }\n\n      if (window.innerWidth >= 601 && window.innerWidth <= 1000) {\n        _this.setState({\n          cards: 2\n        });\n\n        return;\n      }\n\n      if (window.innerWidth >= 1001 && window.innerWidth <= 1270) {\n        _this.setState({\n          cards: 3\n        });\n\n        return;\n      }\n\n      if (window.innerWidth >= 1271 && window.innerWidth <= 1530) {\n        _this.setState({\n          cards: 4\n        });\n\n        return;\n      }\n\n      if (window.innerWidth >= 1530) {\n        _this.setState({\n          cards: 5\n        });\n\n        return;\n      }\n    };\n\n    _this.searchHandler = function (event) {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var filteredRestaurants = null;\n      var xhrFilteredRestaurants = new XMLHttpRequest();\n      xhrFilteredRestaurants.addEventListener(\"readystatechange\", function () {\n        if (this.readyState === 4) {\n          if (!JSON.parse(this.responseText).restaurants) {\n            that.setState({\n              restaurants: null\n            });\n          } else {\n            that.setState({\n              restaurants: JSON.parse(this.responseText).restaurants\n            });\n          }\n        }\n      });\n\n      if (event.target.value === '') {\n        _this.getRestaurants();\n      } else {\n        var url = _this.props.baseUrl + 'restaurant/name/' + event.target.value;\n        xhrFilteredRestaurants.open(\"GET\", url);\n        xhrFilteredRestaurants.send(filteredRestaurants);\n      }\n    };\n\n    _this.restaurantDetails = function (restaurantId) {\n      _this.props.history.push('/restaurant/' + restaurantId);\n    };\n\n    _this.state = {\n      restaurants: [],\n      cards: null,\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.mounted = true;\n      this.getRestaurants();\n      this.noOfColumns(); //when the window is resized calls the noOfColumns method\n\n      window.addEventListener('resize', this.noOfColumns);\n    } //called before render()\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('resize', this.noOfColumns);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      return this.mounted === true ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Header, {\n        showSearchBox: true,\n        searchHandler: this.searchHandler,\n        baseUrl: this.props.baseUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), this.state.restaurants.length === 0 && this.state.loading === false ? React.createElement(Typography, {\n        variant: \"h6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"No restaurant with the given name.\") : React.createElement(GridList, {\n        cols: this.state.cards,\n        cellHeight: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.state.restaurants.map(function (restaurant) {\n        return React.createElement(GridListTile, {\n          key: 'restaurant' + restaurant.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: classes.restaurantsCard,\n          onClick: function onClick() {\n            return _this2.restaurantDetails(restaurant.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(CardActionArea, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(CardMedia, {\n          component: \"img\",\n          height: 160,\n          image: restaurant.photo_URL,\n          title: restaurant.restaurant_name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }), React.createElement(CardContent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"restaurant-title-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          gutterBottom: true,\n          variant: \"h5\",\n          component: \"h2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, restaurant.restaurant_name)), React.createElement(\"div\", {\n          className: \"restaurant-categories-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"subtitle1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, restaurant.categories)), React.createElement(\"div\", {\n          className: \"rating-and-avg-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"restaurant-rating-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"body1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-star\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }), \" \", restaurant.customer_rating, \" (\", restaurant.number_customers_rated, \")\")), React.createElement(\"div\", {\n          className: \"restaurant-avg-price-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"body1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-inr\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }), restaurant.average_price, \" for two\")))))));\n      }))) : \"\";\n    } //fetches the restaurants from backend\n\n  }]);\n\n  return Home;\n}(Component);\n\nexport default withStyles(styles)(Home);","map":{"version":3,"sources":["/home/mayank/Dev/upgrad/Food-Ordering-App-FrontEnd/src/screens/home/Home.js"],"names":["React","Component","Header","GridList","GridListTile","Card","CardMedia","CardContent","CardActionArea","Typography","withStyles","axios","styles","theme","restaurantsCard","width","maxWidth","height","maxHeight","marginTop","marginBottom","marginLeft","marginRight","paddingBottom","cursor","Home","getRestaurants","that","restaurantsData","xhrRestaurants","XMLHttpRequest","onload","setState","loading","addEventListener","readyState","restaurants","JSON","parse","responseText","get","props","baseUrl","then","url","open","send","noOfColumns","window","innerWidth","cards","searchHandler","event","filteredRestaurants","xhrFilteredRestaurants","target","value","restaurantDetails","restaurantId","history","push","state","mounted","removeEventListener","classes","length","map","restaurant","id","photo_URL","restaurant_name","categories","customer_rating","number_customers_rated","average_price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\n//importing the header component\nimport Header from '../../common/header/Header';\n\n//importing material-ui components\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\n\n//importing the css file of the Home page\nimport './Home.css';\n\nconst styles = theme => ({\n    restaurantsCard: {\n        width: 300,\n        maxWidth: 300,\n        height: 340,\n        maxHeight: 340,\n        marginTop: 15,\n        marginBottom: 10,\n        marginLeft: 'auto',\n        marginRight: 'auto',\n        paddingBottom: 15,\n        cursor: 'pointer',\n    }\n});\n\nclass Home extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            restaurants: [],\n            cards: null,\n            loading: false\n        }\n    }\n\n    componentDidMount() {\n        this.mounted = true;\n        this.getRestaurants();\n        this.noOfColumns();\n        //when the window is resized calls the noOfColumns method\n        window.addEventListener('resize', this.noOfColumns);\n    }\n\n    //called before render()\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.noOfColumns);\n    }\n\n    render() {\n        const { classes } = this.props;\n        return (\n            this.mounted === true ?\n                <div>\n                    <Header showSearchBox={true} searchHandler={this.searchHandler} baseUrl={this.props.baseUrl} />\n                    {/* if no restaurants found with the entered name displays the No restaurant with the given name. */}\n                    {this.state.restaurants.length === 0 && this.state.loading === false ?\n                        <Typography variant=\"h6\">No restaurant with the given name.</Typography> :\n                        <GridList cols={this.state.cards} cellHeight=\"auto\">\n                            {this.state.restaurants.map(restaurant => (\n                                <GridListTile key={'restaurant' + restaurant.id} >\n                                    {/* restaurant details card onclick redirects to restaurant details page*/}\n                                    < Card className={classes.restaurantsCard} onClick={() => this.restaurantDetails(restaurant.id)}>\n                                        <CardActionArea>\n                                            <CardMedia component=\"img\" height={160} image={restaurant.photo_URL} title={restaurant.restaurant_name} />\n                                            <CardContent>\n                                                <div className=\"restaurant-title-div\">\n                                                    <Typography gutterBottom variant='h5' component='h2'>\n                                                        {restaurant.restaurant_name}\n                                                    </Typography>\n                                                </div>\n                                                <div className=\"restaurant-categories-div\">\n                                                    <Typography variant='subtitle1'>\n                                                        {restaurant.categories}\n                                                    </Typography>\n                                                </div>\n                                                <div className=\"rating-and-avg-div\">\n                                                    {/* restaurant rating */}\n                                                    <div className=\"restaurant-rating-div\">\n                                                        <Typography variant='body1'>\n                                                            <i className=\"fa fa-star\"></i> {restaurant.customer_rating} ({restaurant.number_customers_rated})\n                                                </Typography>\n                                                    </div>\n                                                    {/* restaurant average price */}\n                                                    <div className=\"restaurant-avg-price-div\">\n                                                        <Typography variant='body1'>\n                                                            <i className=\"fa fa-inr\" aria-hidden=\"true\"></i>{restaurant.average_price} for two\n                                            </Typography>\n                                                    </div>\n                                                </div>\n                                            </CardContent>\n                                        </CardActionArea>\n                                    </Card>\n                                </GridListTile>\n                            ))}\n                        </GridList>\n                    }\n                </div>\n                : \"\"\n        )\n    }\n\n    //fetches the restaurants from backend\n    getRestaurants = () => {\n        let that = this;\n        let restaurantsData = null;\n        let xhrRestaurants = new XMLHttpRequest();\n        xhrRestaurants.onload = this.setState({ loading: true })\n        xhrRestaurants.addEventListener('readystatechange', function () {\n            if (this.readyState === 4) {\n                that.setState({\n                    restaurants: JSON.parse(this.responseText).restaurants,\n                    loading: false\n                });\n            }\n        })\n        axios.get(this.props.baseUrl + 'restaurant').then\n        let url = this.props.baseUrl + 'restaurant';\n        xhrRestaurants.open(\"GET\", url);\n        xhrRestaurants.send(restaurantsData);\n    }\n\n    //method updates the no columns according to the window size\n    noOfColumns = () => {\n\n        if (window.innerWidth >= 320 && window.innerWidth <= 600) {\n            this.setState({\n                cards: 1,\n            });\n            return;\n        }\n\n        if (window.innerWidth >= 601 && window.innerWidth <= 1000) {\n            this.setState({\n                cards: 2,\n            });\n            return;\n        }\n\n        if (window.innerWidth >= 1001 && window.innerWidth <= 1270) {\n            this.setState({\n                cards: 3,\n            });\n            return;\n        }\n\n        if (window.innerWidth >= 1271 && window.innerWidth <= 1530) {\n            this.setState({\n                cards: 4,\n            });\n            return;\n        }\n        if (window.innerWidth >= 1530) {\n            this.setState({ cards: 5 });\n            return;\n        }\n    }\n\n    // integrating search box with ui\n    searchHandler = (event) => {\n        let that = this;\n        let filteredRestaurants = null;\n        let xhrFilteredRestaurants = new XMLHttpRequest();\n        xhrFilteredRestaurants.addEventListener(\"readystatechange\", function () {\n            if (this.readyState === 4) {\n                if (!JSON.parse(this.responseText).restaurants) {\n                    that.setState({\n                        restaurants: null\n                    });\n                } else {\n                    that.setState({\n                        restaurants: JSON.parse(this.responseText).restaurants\n                    });\n                }\n            }\n        });\n        if (event.target.value === '') {\n            this.getRestaurants();\n        } else {\n            let url = this.props.baseUrl + 'restaurant/name/' + event.target.value;\n            xhrFilteredRestaurants.open(\"GET\", url);\n            xhrFilteredRestaurants.send(filteredRestaurants);\n        }\n    }\n\n    // redirects to restaurant details page with restauranat id\n    restaurantDetails = (restaurantId) => {\n        this.props.history.push('/restaurant/' + restaurantId);\n    }\n}\n\nexport default withStyles(styles)(Home);"]},"metadata":{},"sourceType":"module"}